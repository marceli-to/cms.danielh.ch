(()=>{"use strict";var n={};n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"==typeof window)return window}}();var t,e=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],o=function(n){return-1!==e.map((function(n){return n.toLowerCase()})).indexOf(n.toLowerCase())},i=function(n,t,e){var i=t.$props.value?t.$props.value:"",r=t.$props.initialValue?t.$props.initialValue:"";e.setContent(i||(t.initialized?t.cache:r)),t.$listeners.input&&function(n,t){var e=n.$props.modelEvents?n.$props.modelEvents:null,o=Array.isArray(e)?e.join(" "):e;n.$watch("value",(function(e,o){t&&"string"==typeof e&&e!==o&&e!==t.getContent({format:n.$props.outputFormat})&&t.setContent(e)})),t.on(o||"change input undo redo",(function(){n.$emit("input",t.getContent({format:n.$props.outputFormat}))}))}(t,e),function(n,t,e){Object.keys(t).filter(o).forEach((function(o){var i=t[o];"function"==typeof i&&("onInit"===o?i(n,e):e.on(o.substring(2),(function(n){return i(n,e)})))}))}(n,t.$listeners,e),t.initialized=!0},r=0,s=function(n){var t=Date.now();return n+"_"+Math.floor(1e9*Math.random())+ ++r+String(t)},a=function(n){return void 0===n||""===n?[]:Array.isArray(n)?n:n.split(" ")},c=function(){return{listeners:[],scriptId:s("tiny-script"),scriptLoaded:!1}},u=(t=c(),{load:function(n,e,o){t.scriptLoaded?o():(t.listeners.push(o),n.getElementById(t.scriptId)||function(n,t,e,o){var i=t.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=n,i.src=e;var r=function(){i.removeEventListener("load",r),o()};i.addEventListener("load",r),t.head&&t.head.appendChild(i)}(t.scriptId,n,e,(function(){t.listeners.forEach((function(n){return n()})),t.scriptLoaded=!0})))},reinitialize:function(){t=c()}}),l=function(){var t="undefined"!=typeof window?window:n.g;return t&&t.tinymce?t.tinymce:null},p={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],value:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(n){return"html"===n||"text"===n}}},d=function(){return d=Object.assign||function(n){for(var t,e=1,o=arguments.length;e<o;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n},d.apply(this,arguments)},f=function(n){return function(){var t,e,o,r=d(d({},n.$props.init),{readonly:n.$props.disabled,selector:"#"+n.elementId,plugins:(t=n.$props.init&&n.$props.init.plugins,e=n.$props.plugins,a(t).concat(a(e))),toolbar:n.$props.toolbar||n.$props.init&&n.$props.init.toolbar,inline:n.inlineEditor,setup:function(t){n.editor=t,t.on("init",(function(e){return i(e,n,t)})),n.$props.init&&"function"==typeof n.$props.init.setup&&n.$props.init.setup(t)}});null!==(o=n.element)&&"textarea"===o.tagName.toLowerCase()&&(n.element.style.visibility=""),l().init(r)}};var h=function(n,t,e,o,i,r,s,a){var c,u="function"==typeof n?n.options:n;if(t&&(u.render=t,u.staticRenderFns=e,u._compiled=!0),o&&(u.functional=!0),r&&(u._scopeId="data-v-"+r),s?(c=function(n){(n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),i&&i.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(s)},u._ssrRegister=c):i&&(c=a?function(){i.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(n,t){return c.call(t),l(n,t)}}else{var p=u.beforeCreate;u.beforeCreate=p?[].concat(p,c):[c]}return{exports:n,options:u}}({mixins:[Fieldtype],components:{editor:{props:p,created:function(){this.elementId=this.$props.id||s("tiny-vue"),this.inlineEditor=this.$props.init&&this.$props.init.inline||this.$props.inline,this.initialized=!1},watch:{disabled:function(){this.editor.setMode(this.disabled?"readonly":"design")}},mounted:function(){if(this.element=this.$el,null!==l())f(this)();else if(this.element&&this.element.ownerDocument){var n=this.$props.cloudChannel?this.$props.cloudChannel:"5",t=this.$props.apiKey?this.$props.apiKey:"no-api-key",e=null==this.$props.tinymceScriptSrc?"https://cdn.tiny.cloud/1/"+t+"/tinymce/"+n+"/tinymce.min.js":this.$props.tinymceScriptSrc;u.load(this.element.ownerDocument,e,f(this))}},beforeDestroy:function(){null!==l()&&l().remove(this.editor)},deactivated:function(){var n;this.inlineEditor||(this.cache=this.editor.getContent(),null===(n=l())||void 0===n||n.remove(this.editor))},activated:function(){!this.inlineEditor&&this.initialized&&f(this)()},render:function(n){return this.inlineEditor?function(n,t,e){return n(e||"div",{attrs:{id:t}})}(n,this.elementId,this.$props.tagName):function(n,t){return n("textarea",{attrs:{id:t},style:{visibility:"hidden"}})}(n,this.elementId)}}},computed:{apiKey:function(){return this.meta.key},cloudChannel:function(){return this.meta.cloud_channel?this.meta.cloud_channel:6},init:function(){return this.meta.init}}},(function(){var n=this,t=n.$createElement;return(n._self._c||t)("editor",{attrs:{value:n.value,"api-key":n.apiKey,init:n.init,"cloud-channel":n.cloudChannel},on:{input:n.update}})}),[],!1,null,null,null);const m=h.exports;Statamic.booting((function(){Statamic.$components.register("tinymce_cloud-fieldtype",m)}))})();